@model mothercare.Models.Home.productViewClass
<link href="~/Content/productView.css" rel="stylesheet" />
@{
    ViewBag.Title = "Product Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<link href="~/Content/Alert.css" rel="stylesheet" />
<link href="~/Content/comment.css" rel="stylesheet" />
<div>
    <h4>Product Details</h4>
    <hr />
    @if (Model.products != null)
        {
    <div class="card-wrapper jumbotron jumbotron-fluid">
        <div class="card">
            <div class="container">
                <div class="row">
                    <div class="col-md-5">
                        <!-- card left -->
                        <div class="product-imgs">
                            <div class="img-display">
                                <div class="img-showcase">
                                    <img src="~/ProductImg/@Model.products.ProductImage" alt="Product image">
                                </div>
                            </div>
                            <div class="img-select">
                                <div class="img-item">
                                    <a href="#" data-id="1">
                                        <img src="~/ProductImg/@Model.products.ProductImage" alt="Product image">
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-5">
                        <!-- card right -->
                        <div class="product-content">
                            <h2 class="product-title">
                                @Model.products.ProductName@if (Model.products.IsFeatured == true)
                                {
                                    <sup>
                                        <span class="badge badge-success" style="background-color:green">New</span>
                                    </sup>

                                }
                                else
                                {
                                    <sup>
                                        <span class="badge badge-warning" style="background-color:sandybrown">Old</span>
                                    </sup>
                                }
                            </h2>
                            <a href="#" class="product-link">visit store</a>
                            <div class="product-rating">
                                @{
                                    if (@Model.rating2 == null || @Model.rating2 == double.NaN | @Model.rating2 == 0)
                                    {
                                        <i class="fa fa-star-o"></i>
                                        <i class="fa fa-star-o"></i>
                                        <i class="fa fa-star-o"></i>
                                        <i class="fa fa-star-o"></i>
                                        <i class="fa fa-star-o"></i>
                                    }
                                    else if (@Model.rating2 > 0 && @Model.rating2 < 1)
                                    {
                                        <i class="fa fa-star-half-o"></i>
                                        <i class="fa fa-star-o"></i>
                                        <i class="fa fa-star-o"></i>
                                        <i class="fa fa-star-o"></i>
                                        <i class="fa fa-star-o"></i>
                                    }
                                    else if (@Model.rating2 == 1)
                                    {
                                        <i class="fa fa-star"></i>
                                        <i class="fa fa-star-o"></i>
                                        <i class="fa fa-star-o"></i>
                                        <i class="fa fa-star-o"></i>
                                        <i class="fa fa-star-o"></i>
                                    }
                                    else if (@Model.rating2 > 1 && @Model.rating2 < 2)
                                    {
                                        <i class="fa fa-star"></i>
                                        <i class="fa fa-star-half-o"></i>
                                        <i class="fa fa-star-o"></i>
                                        <i class="fa fa-star-o"></i>
                                        <i class="fa fa-star-o"></i>
                                    }
                                    else if (@Model.rating2 == 2)
                                    {
                                        <i class="fa fa-star"></i>
                                        <i class="fa fa-star"></i>
                                        <i class="fa fa-star-o"></i>
                                        <i class="fa fa-star-o"></i>
                                        <i class="fa fa-star-o"></i>
                                    }
                                    else if (@Model.rating2 > 2 && @Model.rating2 < 3)
                                    {
                                        <i class="fa fa-star"></i>
                                        <i class="fa fa-star"></i>
                                        <i class="fa fa-star-half-o"></i>
                                        <i class="fa fa-star-o"></i>
                                        <i class="fa fa-star-o"></i>
                                    }
                                    else if (@Model.rating2 == 3)
                                    {
                                        <i class="fa fa-star"></i>
                                        <i class="fa fa-star"></i>
                                        <i class="fa fa-star"></i>
                                        <i class="fa fa-star-o"></i>
                                        <i class="fa fa-star-o"></i>
                                    }
                                    else if (@Model.rating2 > 3 && @Model.rating2 < 4)
                                    {
                                        <i class="fa fa-star"></i>
                                        <i class="fa fa-star"></i>
                                        <i class="fa fa-star"></i>
                                        <i class="fa fa-star-half-o"></i>
                                        <i class="fa fa-star-o"></i>
                                    }
                                    else if (@Model.rating2 == 4)
                                    {
                                        <i class="fa fa-star"></i>
                                        <i class="fa fa-star"></i>
                                        <i class="fa fa-star"></i>
                                        <i class="fa fa-star"></i>
                                        <i class="fa fa-star-o"></i>
                                    }
                                    else if (@Model.rating2 > 4 && @Model.rating2 < 5)
                                    {
                                        <i class="fa fa-star"></i>
                                        <i class="fa fa-star"></i>
                                        <i class="fa fa-star"></i>
                                        <i class="fa fa-star"></i>
                                        <i class="fa fa-star-half-alt"></i>
                                    }
                                    else if (@Model.rating2 == 5)
                                    {
                                        <i class="fa fa-star"></i>
                                        <i class="fa fa-star"></i>
                                        <i class="fa fa-star"></i>
                                        <i class="fa fa-star"></i>
                                        <i class="fa fa-star"></i>
                                    }

                                }

                                <span>@Model.rating2 (@Model.rater)</span>
                            </div>
                            <div class="product-price">
                                <!--<p class="last-price">Old Price: <span>$257.00</span></p>-->
                                <p class="new-price"><span style="color:orange"><b>৳ @Model.products.Price</b></span></p>
                            </div>
                            <div class="product-detail">


                                <p>@Model.products.Description</p>
                                <ul>
                                    <!--<li>Color: <span>Black</span></li>-->
                                    @{
                                        if (Model.products.IsActive == true)
                                        {
                                            <li>Available: <span class="badge badge-primary" style="background-color:cornflowerblue"><h5><b>In stock</b></h5></span></li>
                                        }
                                        else
                                        {
                                            <li>Available: <span class="badge badge-primary" style="background-color:red"><h5><b>Out of stock</b></h5></span></li>
                                        }
                                    }
                                    <li>Category: <span>@Model.products.Tbl_Category.CategoryName</span></li>
                                    <li>Shipping Area: <span>All over the Country</span></li>
                                    <li>Shipping Fee: <span>Free</span></li>
                                </ul>
                            </div>

                            <div class="purchase-info">
                                <!--<input type="number" min="0" value="1">-->
                                @if (Model.products.Quantity > 0 && Model.products.IsDelete != null && !(bool)Model.products.IsDelete)
                                {
                                    using (Html.BeginForm("AddToCart", "Home", new { productId = Model.products.ProductId, url = Request.Url.AbsoluteUri }, FormMethod.Post))
                                    {
                                        <button type="submit" class="btn" style="background-color:blue">
                                            Add to Cart <i class="fa fa-shopping-cart"></i>
                                        </button>
                                    }
                                }
                                <button type="button" class="btn">Compare</button>
                            </div>

                            <div class="social-links">
                                <p>Share At: </p>
                                <a href="#">
                                    <i class="fa fa-facebook-f"></i>
                                </a>
                                <a href="#">
                                    <i class="fa fa-twitter"></i>
                                </a>
                                <a href="#">
                                    <i class="fa fa-instagram"></i>
                                </a>
                                <a href="#">
                                    <i class="fa fa-whatsapp"></i>
                                </a>
                                <a href="#">
                                    <i class="fa fa-pinterest"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="demo-preview ">
        <div class="alert alert-warning alert-dismissable fade in">
            <button type="button" data-dismiss="alert" aria-label="close" class="close"><span aria-hidden="true" style="color:white">X</span></button>
            <strong>You have to order the product to rate or comment.</strong>
        </div>
    </div>
    <div class="ratingCard">
        <h2><b>Rate and Review Product</b></h2>
        <form id="form15" onsubmit="ratecomment()">
            <p class="p_class">
                <input id="radio1" type="radio" name="radio_rate" value="5">
                <label for="radio1">&#9786;</label>
                <input id="radio2" type="radio" name="radio_rate" value="4">
                <label for="radio2">&#9786;</label>
                <input id="radio3" type="radio" name="radio_rate" value="3">
                <label for="radio3">&#9786;</label>
                <input id="radio4" type="radio" name="radio_rate" value="2">
                <label for="radio4">&#9786;</label>
                <input id="radio5" type="radio" name="radio_rate" value="1">
                <label for="radio5">&#9786;</label>
                <input type="hidden" id="product" value="@Model.products.ProductId" />
            </p>
            <textarea id="rate_comment" class="comment_area" placeholder="Leave your comment here" required></textarea><br>
            @{

                if (Model.cartCheck > 0 && Model.already == 0)
                {
                    <input type="submit" name="rating_submit" value="Post" />
                }
                else if (Model.cartCheck > 0 && Model.already > 0)
                {
                    <input type="submit" name="rating_submit" value="Post" data-toggle="tooltip" data-placement="top" title="You have already commented" disabled />
                    <div class="demo-preview ">
                        <div class="alert alert-info alert-dismissable fade in">
                            <button type="button" data-dismiss="alert" aria-label="close" class="close"><span aria-hidden="true" style="color:white">X</span></button>
                            <strong>You have already commented.</strong>
                        </div>
                    </div>
                }
                else
                {
                    <input type="submit" name="rating_submit" value="Post" data-toggle="tooltip" data-placement="top" title="You have to order the product to review" disabled />
                }
            }

        </form>
     
    </div>
    <div style="margin-top:20px" class="ratingCard">
        <h2 style="font-weight:bold">Reviews</h2>
        @{
            foreach (var comment in Model.comments)
            {
                <div class="card" style="margin-top:20px">
                            <h4 style="color:cornflowerblue">
                                <strong>@comment.Tbl_Members.FirstName @comment.Tbl_Members.LastName</strong>
                                <div class="pull-right" style="color:orange">
                                    @{
                                        if (comment.Rating != null)
                                        {
                                            if (comment.Rating > 4 && comment.Rating < 5)
                                            {
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star-half-alt"></i>
                                            }
                                            else if (comment.Rating > 3 && comment.Rating < 4)
                                            {
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star-half-alt"></i>
                                                <i class="fa fa-star-o"></i>
                                            }
                                            else if (comment.Rating > 2 && comment.Rating < 3)
                                            {
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star-half-alt"></i>
                                                <i class="fa fa-star-o"></i>
                                                <i class="fa fa-star-o"></i>
                                            }
                                            else if (comment.Rating > 1 && comment.Rating < 2)
                                            {
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star-half-alt"></i>
                                                <i class="fa fa-star-o"></i>
                                                <i class="fa fa-star-o"></i>
                                                <i class="fa fa-star-o"></i>
                                            }
                                            else if (comment.Rating > 0 && comment.Rating < 1)
                                            {
                                                <i class="fa fa-star-half-alt"></i>
                                                <i class="fa fa-star-o"></i>
                                                <i class="fa fa-star-o"></i>
                                                <i class="fa fa-star-o"></i>
                                                <i class="fa fa-star-o"></i>
                                            }
                                            else if (comment.Rating == 1)
                                            {
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star-o"></i>
                                                <i class="fa fa-star-o"></i>
                                                <i class="fa fa-star-o"></i>
                                                <i class="fa fa-star-o"></i>
                                            }
                                            else if (comment.Rating == 2)
                                            {
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star-o"></i>
                                                <i class="fa fa-star-o"></i>
                                                <i class="fa fa-star-o"></i>
                                            }
                                            else if (comment.Rating == 3)
                                            {
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star-o"></i>
                                                <i class="fa fa-star-o"></i>
                                            }
                                            else if (comment.Rating == 4)
                                            {
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star-o"></i>
                                            }
                                            else if (comment.Rating == 5)
                                            {
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                            }
                                        }

                                    }
                                </div>

                            </h4><i class="pull-right" style="font-weight:300">@comment.Date</i>
                    <h5>@comment.Comment</h5>
                    <hr />
                </div>
                }
        }
        

    </div>
    <script type="text/javascript">
        $('#form15').submit(function () {
            //ratecomment()
            return false;
        });
        function ratecomment() {
            var rateComment = new Object();
            rateComment.Comment= $("#rate_comment").val();
            rateComment.ProductId = $("#product").val();
            if ($('input[name=radio_rate]:checked', '#form15').val()) {
                rateComment.Rating = $('input[name=radio_rate]:checked', '#form15').val();
            }
            var data = JSON.stringify({
                rateComment: rateComment
            });

            $.ajax({

                contentType: 'application/json; charset=utf-8',

                dataType: 'json',

                type: 'POST',

                url: "/Home/RateComment",

                data: data,

                async: false,

                success: function (result) {

                    if (result == true) {
                        window.location.reload(false);

                    }
                    else {
                        alert("Save failed!");
                    }

                },

                error: function () {

                    alert("Error!")

                },

            });

        }

    </script>
     }

            else
            {
                <div class="demo-preview ">
        <div class="alert alert-danger alert-dismissable fade in">
            <button type = "button" data-dismiss="alert" aria-label="close" class="close"><span aria-hidden="true" style="color:white">X</span></button>
            <strong>No product found!</strong>
        </div>
    </div>
            }

</div>
